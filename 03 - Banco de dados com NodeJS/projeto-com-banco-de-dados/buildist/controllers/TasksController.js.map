{"version":3,"sources":["../../controllers/TasksController.js"],"names":["require","User","Task","sequelize","ctrl","module","exports","createTask","request","response","next","userId","params","description","body","findById","then","user","create","user_id","id","status","send","task","json","catch","error","console"],"mappings":";;eAAkCA,QAAQ,WAAR,C;IAA1BC,I,YAAAA,I;IAAMC,I,YAAAA,I;IAAMC,S,YAAAA,S;;AAEpB,IAAMC,OAAOC,OAAOC,OAApB;;AAEAF,KAAKG,UAAL,GAAkB,UAAUC,OAAV,EAAmBC,QAAnB,EAA6BC,IAA7B,EAAmC;AAAA,QACzCC,MADyC,GAC9BH,QAAQI,MADsB,CACzCD,MADyC;AAAA,QAEzCE,WAFyC,GAEzBL,QAAQM,IAFiB,CAEzCD,WAFyC;;;AAIjDZ,SAAKc,QAAL,CAAcJ,MAAd,EACKK,IADL,CACU,UAAUC,IAAV,EAAgB;AAClB,YAAIA,IAAJ,EAAU;AACN,mBAAOf,KAAKgB,MAAL,CAAY;AACfC,yBAASF,KAAKG,EADC;AAEfP;AAFe,aAAZ,CAAP;AAIH,SALD,MAKO;AACHJ,qBAASY,MAAT,CAAgB,GAAhB,EAAqBC,IAArB,CAA0B,yBAA1B;AACH;AACJ,KAVL,EAUON,IAVP,CAUY,UAAUO,IAAV,EAAgB;AACpB,YAAIA,IAAJ,EAAU;AACNd,qBAASY,MAAT,CAAgB,GAAhB,EAAqBG,IAArB,CAA0BD,IAA1B;AACH;AACJ,KAdL,EAcOE,KAdP,CAca,UAAUC,KAAV,EAAiB;AACtBC,gBAAQD,KAAR,CAAcA,KAAd;AACAhB,aAAKgB,KAAL;AACH,KAjBL;AAkBH,CAtBD","file":"TasksController.js","sourcesContent":["const { User, Task, sequelize } = require('../models');\r\n\r\nconst ctrl = module.exports;\r\n\r\nctrl.createTask = function (request, response, next) {\r\n    const { userId } = request.params;\r\n    const { description } = request.body;\r\n\r\n    User.findById(userId)\r\n        .then(function (user) {\r\n            if (user) {\r\n                return Task.create({\r\n                    user_id: user.id,\r\n                    description\r\n                })\r\n            } else {\r\n                response.status(404).send('Usuário não encontrado.');\r\n            }\r\n        }).then(function (task) {\r\n            if (task) {\r\n                response.status(201).json(task);\r\n            }\r\n        }).catch(function (error) {\r\n            console.error(error);\r\n            next(error);\r\n        })\r\n}"]}